var lockScroll,SunPowerHelixScroll=function(e,t){var o,a,s,i,r=10,n=10;lockScroll=!1;var c=document.getElementById(e),l=c.getContext("2d"),u=[{keyFrame:0,selector:"",delay:0,isShow:!1},{keyFrame:80,selector:".js-intro",delay:100,sizeAutoScroll:0,isActive:!1,isShow:!0},{keyFrame:365,selector:".js-plataform",delay:100,sizeAutoScroll:200,isActive:!1,isShow:!0},{keyFrame:568,selector:".js-maxeon",delay:100,sizeAutoScroll:30,isActive:!1,isShow:!0},{keyFrame:590,selector:".js-design",delay:100,sizeAutoScroll:22,isActive:!1},{keyFrame:612,selector:".js-hardware",delay:100,sizeAutoScroll:18,isActive:!1,isShow:!0},{keyFrame:630,selector:".js-whole-system",delay:100,sizeAutoScroll:20,isActive:!1,isShow:!0},{keyFrame:700,selector:".js-on-roof",delay:100,sizeAutoScroll:70,isActive:!1,isShow:!0},{keyFrame:833,selector:".js-components",delay:100,sizeAutoScroll:100,isActive:!1,isShow:!0},{keyFrame:992,selector:".js-office",delay:100,sizeAutoScroll:70,isActive:!1,isShow:!0},{keyFrame:1070,selector:"",delay:100,sizeAutoScroll:50,isActive:!1,isShow:!0},{keyFrame:t,selector:"",delay:0,isShow:!1}],f=[{keyFrameStart:0,keyFrameEnd:150,context:"s-dark"},{keyFrameStart:160,keyFrameEnd:180,context:"s-dark"},{keyFrameStart:234,keyFrameEnd:290,context:"s-dark"},{keyFrameStart:500,keyFrameEnd:530,context:"s-dark"},{keyFrameStart:750,keyFrameEnd:870,context:"s-dark"},{keyFrameStart:1067,keyFrameEnd:t,context:"s-dark"}],m=function(){o=t,a=new Array;var e=10,s=function(t){var t=t;o>e&&(t==e?(e+=10,s(t)):(t+=1,setTimeout(function(){var e="images/background/movie_"+t+".jpg",o=new Image;o.src=e,a.push(o),s(t)},1)))};s(0)},d=function(e){"undefined"!=typeof a[e]&&l.drawImage(a[e],0,0,1280,720)},v=function(){var e=new Image;e.src="images/background/movie_1.jpg",e.onload=function(){l.drawImage(e,0,0,1280,720)}},y=function(){i=setInterval(function(){$(c).width($(window).width()).height($(window).height())},100)},k=function(e,t,o){if("function"==typeof o&&"undefined"!=typeof o)var a=o();else var a=h(e,t);return"undefined"!=typeof a?!0:!1},F=function(e){return k(e,f,function(){S(e);return S(e)})},S=function(e){return _.find(f,function(t){return t.keyFrameStart<=e&&t.keyFrameEnd>=e?t:void 0})},h=function(e,t){return _.find(u,function(t){return t.keyFrame==e?t:void 0})},g=function(e){if($("body").removeClass(),F(e)){var t=S(e);$("body").addClass(t.context)}},w=function(e,t){var o=Math.max(-1,Math.min(1,e));if(-1==o){s+=1;var i="DOWN";"function"==typeof t&&"undefined"!=typeof t&&t(i)}else if(1==o){s-=1;var i="UP";"function"==typeof t&&"undefined"!=typeof t&&t(i)}0>=s&&(s=0),s>=a.length&&(s=0)},p=function(){s=0;$(window).mousewheel(function(e){e.preventDefault(),e.stopPropagation(),lockScroll||($(".js-elements").removeClass("is-active is-current"),w(e.deltaY,function(e){x(function(t,o,a){if("UP"==e){if(t>=s&&s>=a.keyFrame){console.log("UP"),lockScroll=!0;var i=function(){s>a.keyFrame?(s-=1,D("Easing: TRUE"),A(i,s,a.keyFrame,n)):z()};setTimeout(i,n)}}else if(s>=o&&s<=a.keyFrame){lockScroll=!0,D("Easing: TRUE"),console.log("DOWN",s>=o,s<=a.keyFrame);var i=function(){s<a.keyFrame?(s+=1,A(i,s,a.keyFrame,n)):z()};setTimeout(i,n)}})}),$(document).trigger("updateFrame",s),d(s))})},C=function(e){if(!lockScroll){$(".js-elements").removeClass("is-active is-current");var t=$(".is-focus").data("keyFrame");if(s>e){var o=function(){s>e&&(s-=1,lockScroll=!0,D("Easing: TRUE"),A(o,s,e),(t==s||s==e)&&(D("Easing: FALSE"),lockScroll=!1,$(".is-focus").removeClass("is-focus")))};setTimeout(o,r)}if(e>s){var o=function(){e>s&&(s+=1,lockScroll=!0,D("Easing: TRUE"),A(o,s,e),(t==s||s==e)&&(lockScroll=!1,D("Easing: FALSE"),$(".is-focus").removeClass("is-focus")))};setTimeout(o,r)}}},A=function(e,t,o,a){if(d(t),"undefined"==typeof a)var a=r;setTimeout(e,a),k(t)&&t==o?$(h(t).selector).addClass("is-active"):$(".js-elements").removeClass("is-active is-current"),$(document).trigger("updateFrame",t)},j=function(){for(var e=$("ul.c-nav"),t=0;t<u.length;t++){var o=u[t];o.isShow&&e.append(T(o.keyFrame))}var a=e.height()/2,s=$(window).height()/2;e.css({top:s-a+"px"})},E=function(){if(k(s)||0==s){if(k(s))var e=h(s).keyFrame;else var e=0;$(".js-nav__item").removeClass("is-active"),$("#"+U(e)).addClass("is-active")}},x=function(e){var t=b(u,s),o=t.keyFrame+t.sizeAutoScroll,a=t.keyFrame-t.sizeAutoScroll;e(o,a,t)},z=function(){var e=0,t=h(s);console.log("Valid Key");var o=function(){e==t.delay/4&&$(t.selector).addClass("is-active"),e<=t.delay&&setTimeout(o,r),e==t.delay&&(t.isActive=!0,lockScroll=!1,D("Easing: FALSE")),e+=1};setTimeout(o,r)},T=function(e){var t=$("<a/>").addClass("c-nav__action js-nav__item").attr("href","#").attr("id",U(e)).data("keyFrame",e),o=$("<li/>").html(t).addClass("c-nav__item");return o},b=function(e,t){for(var o=null,a=1e4,s=0;s<e.length;s++){var i=e[s];i.index=s;var r=Math.abs(t-i.keyFrame);a>r&&(a=r,o=i)}return o},U=function(e){return"keyFrame-"+e},D=function(e){};m(),y(),p(),j(),g(0),E(),v(),C(u[1].keyFrame),$(document).on("updateFrame",function(e,t){E(),g(t)}),$(document).on("click",".js-nav__item",function(e){if(e.preventDefault(),!lockScroll){var t=$(this),o=t.data("keyFrame");t.addClass("is-focus"),C(o)}})};$(function(){SunPowerHelixScroll("background",1100),$(".js-plataform-btn").on("click",function(e){e.preventDefault();var t=$(this).data("key-selector"),o=$(this).hasClass("is-close");o?($(this).removeClass("is-current is-close"),$(".js-plataform-content").removeClass("is-active")):($(".js-plataform-btn").removeClass("is-current"),$(".js-plataform-content").removeClass("is-active"),$(this).addClass("is-current is-close"),$(t).addClass("is-active"))}),$(".js-office-btn").on("click",function(e){e.preventDefault();var t=$(this).data("key-selector"),o=$(this).hasClass("is-close");o?($(this).removeClass("is-current is-close"),$(".js-office-content").removeClass("is-active")):($(".js-office-btn").removeClass("is-current"),$(".js-office-content").removeClass("is-active"),$(this).addClass("is-current is-close"),$(t).addClass("is-active"))})});